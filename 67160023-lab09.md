# คำถามทดสอบความเข้าใจ (Assessment Questions)

---

## ส่วนที่ 1 การทำความเข้าใจโค้ด

### คำถาม 1.1 เหตุใดจึงต้องแยก duration และ timeLeft ออกจากกัน อธิบายความแตกต่าง

duration คือ ระยะเวลาตั้งต้นทั้งหมดของ task (ค่าคงที่)
timeLeft คือ เวลาที่เหลืออยู่จริงระหว่างการนับถอยหลัง (เปลี่ยนแปลงตลอด)
การแยกสองตัวนี้ช่วยให้สามารถรีเซ็ตเวลาได้ง่าย,โค้ดอ่านเข้าใจง่าย,แยกหน้าที่ชัดเจน,ป้องกันความสับสนระหว่าง “เวลาตั้งต้น” กับ “เวลาที่เหลือ”

### คำถาม 1.2 formatTime() ฟังก์ชันนี้ทำความสำคัญอะไร? ถ้าไม่มีฟังก์ชันนี้ app จะเป็นยังไง

formatTime() ทำหน้าที่แปลงเวลาในหน่วยวินาทีให้เป็นรูปแบบ นาที:วินาที (MM:SS) ถ้าไม่มี ตัวแอปจะแสดงตัวเลขดิบ ,ผู้ใช้เข้าใจยากว่าเป็นเวลาแบบไหน โค้ดจัดรูปแบบซ้ำซ้อน ผิดหลักDRY

### คำถาม 1.3 อธิบายข้อแตกต่างระหว่าง setInterval() และ setTimeout()

setInterval() : ทำงานซ้ำทุกช่วงเวลาที่กำหนด
setTimeout() : ทำงานเพียงครั้งเดียวหลังครบเวลา
ในแอปนี้ setInterval() เหมาะสมกว่า เพราะต้องอัปเดต timer ทุก 1 วินาทีต่อเนื่อง

---

## ส่วนที่ 2: ฟังก์ชันการทำงาน

### คำถาม 2.1 เมื่อผู้ใช้คลิกปุ่ม “▶️ เริ่ม” ครั้งแรก เกิดอะไรขึ้นในลำดับใด (ระบุขั้นตอนอย่างน้อย 4 ขั้น)

1.เรียก toggleTimer(id)
2.ตรวจสอบ task.isRunning (ค่าเริ่มต้นเป็น false)
3.ตั้งค่า task.isRunning = true
4.เรียก setInterval() ทุก 1 วินาที
5.ลดค่า task.timeLeft--
6.เรียก renderTasks() เพื่ออัปเดต UI

### คำถาม 2.2 ในฟังก์ชัน toggleTimer() ทำไมจึงต้องมี clearInterval() ก่อนแล้วจึงตั้ง task.isRunning = false

เพื่อหยุดการทำงานของ timer จริง ๆ

### คำถาม 2.3 ถ้า timer หมดเวลา จะเกิดความผิดพลาดใดหากไม่มี clearInterval()

timeLeft จะติดลบ
alarm และ notification อาจทำงานซ้ำไม่หยุด เกิด memory leak จาก interval ที่ไม่ถูกยกเลิก

---

## ส่วนที่ 3: DOM และ UI

### คำถาม 3.1 ฟังก์ชัน renderTasks() สามารถแยกออกเป็นฟังก์ชันย่อยได้กี่ฟังก์ชัน จงเสนอการแยกที่เหมาะสม

getTimerClass(task)
createTaskHTML(task)
renderEmptyMessage()
ช่วยให้โค้ดอ่านง่ายและดูแลรักษาได้ดีขึ้น

### คำถาม 3.2 ใช้วิธีใดในการอัปเดต UI ทุกครั้งที่ timer เปลี่ยนแปลง มีวิธีการอื่นนอกเหนือจำนวนปัจจุบันหรือไม่

ใช้วิธีเรียก renderTasks() ทุกครั้งที่ข้อมูลเปลี่ยน แต่ก็มีวิธีอื่นนอกเหนือจากนี้เช่นกัน

### คำถาม 3.3 “keypress” event listener ทำความสำคัญอะไร หากลบออกไป app จะเป็นยังไง

ช่วยให้ผู้ใช้กด Enter เพื่อเพิ่ม task ได้
ถ้าลบออก แอปยังใช้งานได้ แต่ UX จะด้อยลง

---

## ส่วนที่ 4: Web Audio API

### คำถาม 4.1 อธิบายหน้าที่ของการตั้งค่า:

### oscillator.frequency.value = 800

### oscillator.type = "sine"

### gainNode.gain.setValueAtTime(0.3, audioContext.currentTime)

oscillator.frequency.value = 800 → ความถี่เสียง (โทนสูง)
oscillator.type = "sine" → เสียงเรียบ ไม่แหลมเกิน
gainNode.gain.setValueAtTime(0.3, ...) → ระดับความดัง

### คำถาม 4.2 ทำไมเสียง alarm จึงใช้เวลา 0.5 วินาที แล้วหยุด ถ้าเพิ่มเป็น 2 วินาทีจะส่งผลต่อ UX อย่างไร

เหตุผลที่เสียงยาว 0.5 วินาที
ไม่รบกวนผู้ใช้
แจ้งเตือนชัดเจนแต่ไม่รำคาญ
ถ้าเพิ่มเป็น 2 วินาที อาจทำให้ผู้ใช้รู้สึกรบกวน โดยเฉพาะเมื่อมีหลาย task

---

## ส่วนที่ 5: Array Methods

### คำถาม 5.1 ในฟังก์ชัน deleteTask(id) ใช้ filter() เพื่ออะไร เขียนวิธีอื่นแทน filter() ได้หรือไม่

filter() ใช้สร้าง array ใหม่โดยตัด task ที่มี id ตรงกันออก สามารถใช้วิธีอื่นแทนได้

### คำถาม 5.2 ในฟังก์ชัน renderTasks() ใช้ map() เพื่อทำอะไร ถ้าใช้ forEach() แทนจะดีหรือไม่

map() ใช้แปลง task → HTML string
forEach() ไม่เหมาะ เพราะไม่ return ค่า

---

## ส่วนที่ 6: ข้อบกพร่องและการแก้ไข

### คำถาม 6.1 หากผู้ใช้เพิ่ม task 2 อัน แล้วคลิก “เริ่ม” บน task ทั้ง 2 อันพร้อมๆ กัน จะเกิดอะไรขึ้น

ทั้งสอง task จะนับถอยหลังพร้อมกัน ไม่มี error เพราะแต่ละ task มี intervalId แยกกัน

### คำถาม 6.2 ถ้า timer กำลังเดินอยู่ และผู้ใช้รีเฟรชหน้า (F5) task จะหายไป ทำไม วิธีแก้ปัญหาคือ

เพราะข้อมูลอยู่ใน memory
วิธีแก้:ใช้ localStorage เก็บ tasks

### คำถาม 6.3 ในการทดสอบ app ที่ timer 30 นาที จะใช้เวลานานไปหรือไม่ เสนอวิธีทดสอบที่เร็วขึ้น

นานเกินไป
วิธีแก้:เปลี่ยน duration ชั่วคราวเป็น 10–30 วินาที หรือเพิ่ม test mode

---

## ส่วนที่ 7: Enhancement

### คำถาม 7.1 หากต้องการเพิ่มฟังก์ชัน “รีเซ็ต timer” คืนไปเป็น 30 นาที โค้ดจะเป็นยังไง

เพิ่มปุ่มรีเซ็ต timer
task.timeLeft = task.duration;
clearInterval(task.intervalId);
task.isRunning = false;
renderTasks();

### คำถาม 7.2 วิธีใดในการเก็บ tasks ไว้ใน LocalStorage เพื่อไม่ให้หายเมื่อรีเฟรชหน้า

เก็บ tasks ใน LocalStorage
ใช้ JSON.stringify(tasks) ตอนเปลี่ยนข้อมูล
โหลดกลับด้วย JSON.parse() ตอนเริ่มแอป

### คำถาม 7.3 ถ้าต้องการให้ผู้ใช้กำหนดเวลา timer เอง จะต้องแก้ไขฟังก์ชันไหนบ้าง

index.html เพิ่ม input เวลา
addTask() รับค่า duration จากผู้ใช้
ปรับ duration และ timeLeft

---

## ส่วนที่ 8: Concepts เชิงลึก

### คำถาม 8.1 ทำไม renderTasks() จึงต้องเรียกหลายครั้ง มีวิธี DRY ที่ดีกว่าหรือไม่

เพราะ UI ไม่ reactive
วิธี DRY:
รวมจุดเรียก render
ใช้ state observer หรือ framework

### คำถาม 8.2 ถ้าเปลี่ยนจาก setInterval เป็น requestAnimationFrame จะส่งผลดีหรือไม่

ใช้ requestAnimationFrame() แทนไม่เหมาะ
เพราะ timer ต้องอิงเวลา ไม่ใช่ frame

### คำถาม 8.3 ในโค้ดที่ใช้ setInterval() มี Memory Leak

มี ถ้าไม่ clearInterval()
task ถูกลบแต่ interval ยังทำงาน
